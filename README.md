# Hanzi Remix

這是一個探索漢字視覺結構的演算法專案，旨在尋找符合「**咖啡 (Coffee) 現象**」的特殊中文字組。

所謂「咖啡現象」，是指一組雙字詞，在視覺上可以拆解為部件序列，並線性重組為三個合法的漢字。這種重組過程打破了原有的字間界線，產生獨特的視覺錯視與韻律。

## 核心概念

### 範例：咖啡 $\rightarrow$ 叻吅非

本專案將漢字視為「視覺區塊 (Visual Blocks)」的組合，而非單純的筆畫。

1.  **輸入**：`咖啡`
2.  **視覺拆解**：
    *   `咖` $\rightarrow$ `口` (左) + `力` (中) + `口` (右)
    *   `啡` $\rightarrow$ `口` (左) + `非` (右)
3.  **線性重組**：
    *   區塊序列：`[口] [力] [口] [口] [非]`
    *   重組為：`[口+力]` + `[口+口]` + `[非]`
4.  **輸出**：`叻吅非`

## 搜尋邏輯

本專案不預設固定的拆解模式，而是透過 IDS (表意文字描述序列) 尋找「**字間縫合**」的可能性。演算法的核心在於將前字的「尾部」與後字的「頭部」結合。

### 通用公式：[ $A_{body}$ + $a_{tail}$ ] + [ $b_{head}$ + $B_{body}$ ]

搜尋過程遵循以下通用規則：

1.  **拆解 (Parsing)**：
    將輸入的兩個漢字 $A, B$ 解析為視覺區塊。
    *   $A$ 必須能分離出右側部件 ($a_{tail}$)。
    *   $B$ 必須能分離出左側部件 ($b_{head}$)。

2.  **錯位重組 (Shift & Fuse)**：
    將接縫處部件結合，嘗試形成合法的漢字：
    *   **中間字 ($Y$)**：由 $a_{tail}$ 與 $b_{head}$ 組成 (例如「咖」的右側「口」+「啡」的左側「口」 $\rightarrow$ 「吅」)。

3.  **邊界驗證 (Validation)**：
    確認剩餘的兩端部分也能獨立成字：
    *   **首字 ($X$)**：由 $A_{body}$ 組成 (例如「咖」剩餘的「口+力」 $\rightarrow$ 「叻」)。
    *   **尾字 ($Z$)**：由 $B_{body}$ 組成 (例如「啡」剩餘的「非」 $\rightarrow$ 「非」)。

## 專案功能

*   **IDS 精確解析**：利用 Unicode IDS 識別 `⿲` (左中右) 與 `⿰` (左右) 結構，自動判斷可行的切割點。
*   **詞彙過濾**：使用 Jieba 與 CC-CEDICT 確保輸入與輸出的字詞具有實際意義。
*   **視覺寬度評估**：針對重組後的字形進行寬度檢測，確保新產生的三個字（特別是首字 X）在視覺上結構飽滿，避免過於單薄。

## 資料來源

本專案使用了以下開源資料集：

- **ids.txt**: 漢字拆分資料 (IDS)
  - 來源: [cjkvi-ids](https://github.com/cjkvi/cjkvi-ids/blob/master/ids.txt)
  - 描述: 用於解析漢字的結構與部件。

- **dict.txt.big**: 結巴分詞大字典
  - 來源: [jieba](https://github.com/fxsjy/jieba/blob/master/extra_dict/dict.txt.big)
  - 描述: 用於過濾常見輸入詞彙。

- **cedict_ts.u8**: CC-CEDICT 中英字典
  - 來源: [MDBG](https://www.mdbg.net/chinese/export/cedict/cedict_1_0_ts_utf-8_mdbg.zip)
  - 描述: 用於驗證生成字詞的定義與合法性。

## 使用方式

```bash
python main.py
```

執行完畢後，結果將儲存於 `output/found_results.txt`。

## 成果範例

| 原詞 (Input) | 拆解 (Decomp) | 重組 (Regroup) | 結果 (Output) |
| :--- | :--- | :--- | :--- |
| **咖啡** | `口力` `口` + `口` `非` | `口力` + `口口` + `非` | **叻吅非** |
| **鞦韆** | `革禾` `火` + `革` `遷` | `革禾` + `火革` + `遷` | **鞂煂遷** |
| **蝴蝶** | `虫古` `月` + `虫` `枼` | `虫古` + `月虫` + `枼` | **蛄𦚭枼** |
| **郵輪** | `垂` `阝` + `車` `侖` | `垂` + `阝車` + `侖` | **垂陣侖** |
| **矩陣** | `矢` `巨` + `阝` `車` | `矢` + `巨阝` + `車` | **矢䢹車** |
| **鸚鵡** | `嬰` `鳥` + `武` `鳥` | `嬰` + `鳥武` + `鳥` | **嬰𬷜鳥** |

## 授權

[MIT License](LICENSE)
